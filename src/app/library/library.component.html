<header class="header_main">
    <div class="main_header_block">
        <p class="title">Web Library</p>
        <p class="username">{{user.userName}}</p>   
    </div>
     
    <div class="logOut_button"> 
        <button mat-raised-button (click)="logOut()">Log out</button>
    </div>
</header>
<mat-divider></mat-divider>

<section class="books_and_libraries">
    <div class="libraries_list">
        <div class="libraries_list_title_button">
            <h1 class="libraries_list_title">Libraries</h1>
            <button 
                *ngIf="user.isAdmin"
                mat-icon-button
                (click)="changeAddLibraryMode()"
            >
                <mat-icon>add_circle_outline</mat-icon>
            </button>
        </div>
    
        <div *ngIf="addNewLibraryMode && user.isAdmin">
            <form [formGroup]="addLibraryForm">
                <mat-form-field>
                    <mat-label>Enter library name</mat-label>
                    <input 
                        #libraryName
                        formControlName="name"
                        matInput 
                        hideRequiredMarker
                        placeholder="new name"
                        type="text" 
                    >
                    <button 
                        mat-icon-button
                        (click)="addLibrary(libraryName.value)"
                        matSuffix 
                        aria-label="Add" 
                    >
                      <mat-icon>check</mat-icon>
                    </button>
                    <mat-error *ngIf="!addLibraryForm.valid">Input can't be empty</mat-error>
                </mat-form-field>
            </form>
        </div>
        

        <mat-action-list *ngFor="let library of librariesList" role="libraries" >
            <mat-list-item (click)="chooseLibrary(library)">
                
                    {{library.name}}
                
                <div matListItemMeta>
                    <!-- <button mat-icon-button>
                        <mat-icon>change</mat-icon>
                    </button> -->
                    <button 
                        *ngIf="user.isAdmin"
                        mat-icon-button
                        (click)="deleteLibrary(library)"
                    >
                        <mat-icon>delete</mat-icon>
                    </button>
                </div>
            </mat-list-item>     
            <mat-divider></mat-divider>
        </mat-action-list>
    </div>
    
    <app-books
    [books]="this.libraryService.selectedLibrary.books"
    [currLibrary]="this.libraryService.selectedLibrary"
    >
    </app-books>
</section>
